bwm-ng v0.5-pre2
Copyright (C) 2004 Volker Gropp (bwmng@gropp.org)
http://www.gropp.org

What is this?
=============

Bandwidth Monitor NG is a small and simple console-based live bandwidth 
monitor for Linux, BSD, Solaris, Mac OS X and others.

Short list of features:
- supports /proc/net/dev, netstat, getifaddr, sysctl, kstat and libstatgrab
- unlimited number of interfaces supported
- interfaces are added or removed dynamically from list
- white-/blacklist of interfaces
- output of KB/s, Kb/s, packets, errors, average, max and total sum
- output in curses, plain console, CSV or HTML
- configfile

This was influenced by the old bwm util written by ...... (couldnt find any 
author, debian package: bwm Maintainer: Lenart Janos <ocsi@debian.org>) which 
had some issues with faster interfaces and was very simple. Since i had almost
all code done anyway for other projects, i decided to create my own version.

I actually dont know if netstat input is usefull at all. I saw this elsewhere,
so i added it. Its target is "netstat 1.42 (2001-04-15)" linux or 
Free/Open/netBSD. If there are other formats i would be happy to add them.

For info about libstatgrab please refer to http://www.i-scream.org/libstatgrab/


Supported Platforms
===================

sucessfully tested on:
Linux 2.4, Linux 2.6
freeBSD 4.8, freeBSD 5.3
MacOS X 10.3 
MacOS X 10.1, 10.2 (--without-getifaddrs)
SunOS 5.9 sparc Solaris 9
OpenBSD 3.4
NetBSD 1.6.1, 2.0
IRIX64 6.5

please notify me of working or not working platforms.


INSTALL
=======

./configure
make

to install use as root: 
make install

use ./configure --help for a list of options
getifaddrs is broken in MacOS X 10.1 and 10.2, therefor please use 
./configure --without-getifaddrs


Specs
=====

csv output format: 
unix timestamp;iface_name;bytes_out/s;bytes_in/s;bytes_total/s;bytes_in;bytes_out;packets_out/s;packets_in/s;packets_total/s;packets_in;packets_out;errors_out/s;errors_in/s;errors_in;errors_out\n
Use --count 0 to skip the all zero output after start.

html output format:
edit the bwm-ng.css to modify the output. Please note the htmlrefresh only 
modifies the META refresh, you maybe wanna sync --timeout and --htmlrefresh


USAGE
=====

USAGE: bwm-ng [OPTION] ... [CONFIGFILE]
Options:
  -t, --timeout <msec>    displays stats every <msec> (1msec = 1/1000sec)
                          default: 500
  -d, --dynamic           show values dynamicly (Byte KB MB or GB)
  -a, --allif [mode]      where mode is one of:
                          0=show only up (and selected) interfaces
                          1=show all up interfaces (default)
                          2=show all and down interfaces
  -I, --interfaces <list> show only interfaces in <list> (comma seperated), or
                          if list is prefaced with % show all but interfaces
                          in list
  -S, --sumhidden         count hidden interfaces for total
  -D, --daemon            fork into background and daemonize
  -h, --help              displays this help
  -V, --version           print version info

Input:
  -i, --input <method>    input method, one of: netstat proc libstatgrab
  -f, --procfile <file>   filename to read raw data from. (/proc/net/dev)
  -n, --netstat <path>    use <path> as netstat binary

Output:
  -o, --output <method>   output method, one of: plain, curses, csv, html
  -u, --unit <value>      unit to show. one of bytes, bits, packets, errors
  -T, --type <value>      type of stats. one of rate, max, sum, avg
  -C, --csvchar <char>    delimiter for csv
  -F, --outfile <file>    output file for csv and cvs (default stdout)
  -H, --htmlrefresh <num> meta refresh for html output
  -H, --htmlheader        show <html> and <meta> frame for html output
  -c, --count <num>       number of query/output for plain & csv 
                          (ie 1 for one single output)

Keybindings (curses only):
  'h'     show help
  'q'     exit
  '+'     increases timeout by 100ms
  '-'     decreases timeout by 100ms
  'k','d' switch KB and auto assign Byte/KB/MB/GB
  'a'     cycle: show all interfaces, only those which are up, 
                 only up and not hidden
  's'     sum hidden ifaces to total aswell or not
  'n'     cycle: input methods
  'u'     cycle: bytes,bits,packets,errors
  't'     cycle: current rate, max, sum since start, average for last 30 sec
	

Configfile
==========

either via cmdline or /etc/bwm-ng.conf or ~/.bwm-ng.conf
it consists of:
longoption=value
with 1 or 0 as values for keys without a value in cmdline options.

For more help take a look at bwm-ng.conf-example


Misc
====

Bugs/Known Problems:
  - configure detects getifaddrs, but doesnt work in MacOS X 10.2 or earlier
    (looks like getifaddrs is simply not working in < 10.3)
  - curses output coredumps on netbsd 1.6.1 (maybe others) with unknown TERM
    set and configfile support compiled in
  - curses-help screen affects average stats
  - no other yet, wow ;) (please report if you found one)
 
Todo:
  - Docs and manpage
  - try to avoid kmod, like net-tools do, for socket() for ioctl
  - mysql output
  - setting which stats to output for csv/sql
  - whatever you can think of


 ******************************************************************************
 *  This program is free software; you can redistribute it and/or modify      *
 *  it under the terms of the GNU General Public License as published by      *
 *  the Free Software Foundation; either version 2 of the License, or         *
 *  (at your option) any later version.                                       *
 *                                                                            *
 *  This program is distributed in the hope that it will be useful,           *
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of            *
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             *
 *  GNU General Public License for more details.                              *
 *                                                                            *
 *  You should have received a copy of the GNU General Public License         *
 *  along with this program; if not, write to the Free Software               *
 *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA *
 ******************************************************************************
